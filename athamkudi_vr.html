<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>VR Sky Scene</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  </head>
  <body>
    <a-scene>

      <a-sky id="sky" rotation="0 -90 0"></a-sky>

      <a-entity id="cameraRig">
        <a-entity 
          id="camera"
          camera = "fov: 40"
          look-controls
          position="0 1.0 0">
        </a-entity>
      </a-entity>

      <a-entity laser-controls="hand: left" raycaster="objects: .clickable" line="color: white; opacity: 0.9"></a-entity>

      <a-entity laser-controls="hand: right" raycaster="objects: .clickable" line="color: white; opacity: 0.9"></a-entity>

      <a-entity id="audio_button" visible="true" position="4.2 2.3 -3">
        <a-circle
          radius="0.08"
          color="#ffffff"
          material="shader: flat; opacity: 0.7">
        </a-circle>

        <a-plane
          class="clickable"
          src="./images/icons/close.png"
          width="0.1"
          height="0.1"
          position="0 0 0"
          material="shader: flat"
          transparent="true">
        </a-plane>
      </a-entity>
      
      <a-plane
        class="clickable"
        id="top"
        src="./next.png"
        position="2 1 -4"
        width="0.5"
        height="0.5"
        rotation="0 0 90"
        material="opacity: 0.8; transparent: true">
      </a-plane>

      <a-plane
        class="clickable"
        id="bottom"
        src="./next.png"
        position="2 0 -4"
        width="0.5"
        height="0.5"
        rotation="0 -0.5 -90"
        material="opacity: 0.8; transparent: true">
      </a-plane>

      <a-plane
        class="clickable"
        id="right"
        src="./next.png"
        position="2.5 0.5 -4"
        width="0.5"
        height="0.5"
        rotation="0 0 0"
        material="opacity: 0.8; transparent: true">
      </a-plane>

      <a-plane
        class="clickable"
        id="left"
        src="./next.png"
        position="1.5 0.5 -4"
        width="0.5"
        height="0.5"
        rotation="0 0 -180"
        material="opacity: 0.8; transparent: true">
      </a-plane>

      <a-entity id="audio_button" visible="true" position="0 1.5 -3">
        <a-circle
          radius="0.12"
          color="#ffffff"
          material="shader: flat; opacity: 0.7">
        </a-circle>

        <a-plane
          class="clickable"
          src="./images/icons/audio.png"
          width="0.1"
          height="0.1"
          position="0 0 0.001"
          material="shader: flat"
          transparent="true">
        </a-plane>
      </a-entity>

       <a-text 
        id="myText"
        value="Hello VR!" 
        color="#FFFFFF" 
        position="-1 2 -3"
        width="4">
      </a-text>
    </a-scene>

     <script>
       document.addEventListener("DOMContentLoaded", () => {

        const sky = document.getElementById("sky")
        const left = document.getElementById("left");
        const right = document.getElementById("right");
        const top = document.getElementById("top");
        const bottom = document.getElementById("bottom");

        let left_value = right_value = top_value = bottom_value = 0;
        let left_location = right_location = top_location = bottom_location = '';

        function update_images(){
          left.setAttribute('visible', left_value !== 0);
          right.setAttribute('visible', right_value !== 0);
          top.setAttribute('visible', top_value !== 0);
          bottom.setAttribute('visible', bottom_value !== 0);
        }

        const functions = {
          scene1: function() {
            top_value = 1;
            bottom_value = left_value = right_value = 0;
            sky.setAttribute('src','./images/scene/1.png');
            top_location = 'scene2';
            left_location = right_location = bottom_location = '';
            update_images();
          },

          scene2: function(){
            top_value = bottom_value = 1;
            left_value = right_value = 0;
            sky.setAttribute('src','./images/scene/2.png');
            top_location = 'scene3';
            bottom_location = 'scene1';
            left_location = right_location = '';
            update_images();
          },

          scene3: function(){
            top_value = bottom_value = 1;
            left_value = right_value = 0;
            sky.setAttribute('src','./images/scene/3.png');
            top_location = 'scene4';
            bottom_location = 'scene2';
            left_location = right_location = '';
            update_images();
          },

          scene4: function(){
            top_value = bottom_value = left_value = right_value = 1;
            sky.setAttribute('src','./images/scene/4.png');
            top_location = 'scene8';
            left_location = 'scene6';
            right_location = 'scene5';
            bottom_location = 'scene3';
            update_images();
          },

           scene5: function(){
            left_value = 1;
            top_value = bottom_value = right_value = 0;
            sky.setAttribute('src','./images/scene/5.png');
            left_location = 'scene4';
            right_location = top_location = bottom_location = '';
            update_images();
          },

          scene6: function(){
            right_value = 1;
            top_value = bottom_value = left_value = 0;
            sky.setAttribute('src','./images/scene/6.png');
            right_location = 'scene4';
            left_location = top_location = bottom_location = '';
            update_images();
          },

          scene7: function(){
            right_value = 1;
            top_value = bottom_value = left_value = 0;
            sky.setAttribute('src','./images/scene/7.png');
            right_location = 'scene8';
            left_location = top_location = bottom_location = '';
            update_images();
          },

          scene8: function(){
            top_value = bottom_value = left_value = 1;
            right_value = 0;
            sky.setAttribute('src','./images/scene/8.png');
            top_location = 'scene9';
            left_location = 'scene7';
            right_location = '';
            bottom_location = 'scene5';
            update_images();
          },

          scene9: function(){
            top_value = bottom_value  = 1;
            right_value = left_value = 0;
            sky.setAttribute('src','./images/scene/9.png');
            top_location = 'scene10';
            left_location = '';
            right_location = '';
            bottom_location = 'scene8';
            update_images();
          },
          
          scene10: function(){
            bottom_value  = 1;
            right_value = left_value = top_value = 0;
            sky.setAttribute('src','./images/scene/10.png');
            top_location = left_location = right_location = ''; 
            bottom_location = 'scene9';
            update_images();
          }

        }

        functions.scene1();


        top.addEventListener('click', () => handleDirectionClick(top_location));
        left.addEventListener('click', () => handleDirectionClick(left_location));
        right.addEventListener('click', () => handleDirectionClick(right_location));
        bottom.addEventListener('click', () => handleDirectionClick(bottom_location));

        function handleDirectionClick(location) {
          if (location && functions[location]) {
            functions[location]();
          }
        }
      });

        

    </script>
  </body>
</html>
